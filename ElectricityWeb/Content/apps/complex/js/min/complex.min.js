var Tools;(function(t){var n=function(){function t(t,n){this.width=t,this.height=n}return t}();t.Size=n;var i=function(){function t(t,n){this.x=t,this.y=n}return t}();t.Position=i})(Tools||(Tools={}));var __extends=this.__extends||function(t,n){function i(){this.constructor=t}for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);i.prototype=n.prototype,t.prototype=new i},visual;(function(t){var n=function(){function t(){}return Object.defineProperty(t.prototype,"canvasObject",{get:function(){return this.object},enumerable:!0,configurable:!0}),t.prototype.init=function(t,n){this.object=t,t.selectable=n||!1,t.hasBorders=!1},t}();t.visualElement=n;var i=function(t){function n(){t.apply(this,arguments),this.connectings=[]}return __extends(n,t),Object.defineProperty(n.prototype,"position",{get:function(){return new Tools.Position(this.canvasObject.left+this.canvasObject.width/2,this.canvasObject.top+this.canvasObject.height/2)},enumerable:!0,configurable:!0}),n.prototype.initSizable=function(n,i,e,o,c,r){this.canvas=i,n.left=e.x,n.top=e.y,n.width=o.width,n.height=o.height,n.fill=r||"grey",t.prototype.init.call(this,n,c)},n.prototype.connectWith=function(t){if(!this.isConnectedWith(t)){var n=(new r).initLine(this.canvas,this,t,!1,"grey");this.canvas.sendToBack(n.canvasObject),this.setConnection(t,n),t.setConnection(this,n)}},n.prototype.isConnectedWith=function(t){return this.connectings.forEach(function(n){return n.obj==t?!0:void 0}),!1},n.prototype.setConnection=function(t,n){this.connectings.push(new a(t,n));var i=this;this.canvasObject.on("moving",function(t){t.target,i.connectings.forEach(function(t){t.obj==i&&t.line.canvasObject.set({x1:t.obj.canvasObject.left,y1:t.obj.canvasObject.top})})})},n}(n);t.sizableElement=i;var e=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.initRect=function(n,i,e,o,c){var r=new fabric.Rect;return t.prototype.initSizable.call(this,r,n,i,e,o,c),n.add(r),this},n}(i);t.rectElement=e;var o=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.initCircle=function(n,i,e,o,c){var r=new fabric.Circle;return r.radius=e,t.prototype.initSizable.call(this,r,n,i,new Tools.Size(e,e),o,c),n.add(r),this},n}(i);t.circleElement=o;var c=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.initImage=function(n,i,e,o,c){var r=t.prototype.initSizable;return fabric.Image.fromURL(o,function(t){r(t,n,i,e,c,"white"),n.add(t)}),this},n}(i);t.imageElement=c;var r=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.initLine=function(n,i,e,o,c,r){void 0===r&&(r=1);var a=new fabric.Line([i.position.x,i.position.y,e.position.x,e.position.y]);return a.strokeWidth=r,a.stroke=c,t.prototype.init.call(this,a,o),n.add(a),this},n}(n);t.connectingLine=r;var a=function(){function t(t,n){this.obj=t,this.line=n}return t}()})(visual||(visual={}));var Application=function(){function t(){this.canvas=new fabric.Canvas("canvas")}return t.prototype.init=function(){var t=(new visual.rectElement).initRect(this.canvas,new Tools.Position(100,200),new Tools.Size(200,100),!0,"green"),n=(new visual.circleElement).initCircle(this.canvas,new Tools.Position(400,100),20,!1);(new visual.imageElement).initImage(this.canvas,new Tools.Position(400,100),new Tools.Size(100,100),"../Content/apps/complex/img/test.png",!0),t.connectWith(n)},t.prototype.clear=function(){this.canvas.clear()},t}(),application=new Application;application.init();var input;(function(t){var n=function(){function t(){}return t}();t.inputController=n})(input||(input={}));var creator;(function(t){var n=function(){function t(t){this.canvas=t,this.interactable=!0}return t}();t.creator=n;var i=function(t){function n(n){t.call(this,n),this.interactable=!1}return __extends(n,t),n}(n);t.staticContentCreator=i})(creator||(creator={}));